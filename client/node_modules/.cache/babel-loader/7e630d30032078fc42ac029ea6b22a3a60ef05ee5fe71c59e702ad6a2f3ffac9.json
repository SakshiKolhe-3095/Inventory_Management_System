{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\saksh\\\\OneDrive\\\\Documents\\\\Internship-Mechtronix\\\\Mechtronix-A-Project2\\\\client\\\\src\\\\pages\\\\AddOrder.jsx\",\n  _s = $RefreshSig$();\n// client/src/pages/AddOrder.jsx\n\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useAuth } from '../auth/AuthContext.jsx';\nimport { useNotification } from '../components/Notification.jsx';\nimport API from '../api/axios.js';\nimport { PlusCircle, ArrowLeft, Trash2 } from 'lucide-react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AddOrderPage() {\n  _s();\n  const {\n    token,\n    loadingAuthState\n  } = useAuth();\n  const {\n    showTimedMessage\n  } = useNotification();\n  const navigate = useNavigate();\n  const [clientName, setClientName] = useState('');\n  const [clientAddress, setClientAddress] = useState('');\n  const [selectedProducts, setSelectedProducts] = useState([]); // Array of { productId, quantity }\n  const [availableProducts, setAvailableProducts] = useState([]); // All products fetched from API\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Fetch all available products for selection\n  const fetchAvailableProducts = useCallback(async () => {\n    if (!token) return;\n    try {\n      const response = await API.get('/products', {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      setAvailableProducts(response.data);\n    } catch (err) {\n      console.error('Error fetching available products:', err);\n      showTimedMessage('Failed to load products for order creation.', 5000, 'error');\n    }\n  }, [token, showTimedMessage]);\n  useEffect(() => {\n    if (!loadingAuthState) {\n      fetchAvailableProducts();\n    }\n  }, [loadingAuthState, fetchAvailableProducts]);\n  const handleAddProductToOrder = productId => {\n    const productToAdd = availableProducts.find(p => p._id === productId);\n    if (productToAdd && productToAdd.stock > 0) {\n      // Check if product already exists in selectedProducts\n      const existingProductIndex = selectedProducts.findIndex(item => item.productId === productId);\n      if (existingProductIndex > -1) {\n        // If exists, increment quantity if stock allows\n        const updatedSelectedProducts = [...selectedProducts];\n        if (updatedSelectedProducts[existingProductIndex].quantity < productToAdd.stock) {\n          updatedSelectedProducts[existingProductIndex].quantity += 1;\n          setSelectedProducts(updatedSelectedProducts);\n        } else {\n          showTimedMessage(`Max stock reached for ${productToAdd.name}.`, 3000, 'warning');\n        }\n      } else {\n        // Add new product with quantity 1\n        setSelectedProducts(prev => [...prev, {\n          productId: productToAdd._id,\n          quantity: 1\n        }]);\n      }\n    } else if (productToAdd && productToAdd.stock === 0) {\n      showTimedMessage(`${productToAdd.name} is out of stock.`, 3000, 'error');\n    } else {\n      showTimedMessage('Product not found.', 3000, 'error');\n    }\n  };\n  const handleUpdateProductQuantity = (productId, newQuantity) => {\n    setSelectedProducts(prev => prev.map(item => {\n      if (item.productId === productId) {\n        const productInStock = availableProducts.find(p => p._id === productId);\n        const maxQuantity = productInStock ? productInStock.stock : 0;\n        const quantity = Math.max(1, Math.min(newQuantity, maxQuantity)); // Ensure quantity is min 1 and not more than stock\n        return {\n          ...item,\n          quantity\n        };\n      }\n      return item;\n    }));\n  };\n  const handleRemoveProductFromOrder = productId => {\n    setSelectedProducts(prev => prev.filter(item => item.productId !== productId));\n  };\n  const calculateTotalPrice = () => {\n    return selectedProducts.reduce((total, item) => {\n      const product = availableProducts.find(p => p._id === item.productId);\n      return total + (product ? product.price * item.quantity : 0);\n    }, 0);\n  };\n  const handleSubmit = useCallback(async e => {\n    e.preventDefault();\n    if (!token) {\n      showTimedMessage('You must be logged in to create an order.', 3000);\n      return;\n    }\n    if (!clientName.trim() || !clientAddress.trim() || selectedProducts.length === 0) {\n      showTimedMessage('Please fill all required fields and add at least one product.', 3000);\n      return;\n    }\n    setLoading(true);\n    setError(null);\n    try {\n      const orderData = {\n        clientName: clientName.trim(),\n        clientAddress: clientAddress.trim(),\n        products: selectedProducts // This array will be processed by the backend\n      };\n      // Note: The backend route for placing orders is '/orders/place' based on previous discussions.\n      // If it's still '/orders', please adjust the backend routes accordingly.\n      await API.post('/orders/place', orderData, {\n        // Changed to /orders/place\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      showTimedMessage('Order created successfully!', 3000, 'success');\n      navigate('/orders'); // Redirect to order list\n    } catch (err) {\n      var _err$response, _err$response$data, _err$response2, _err$response2$data;\n      console.error('Error creating order:', err);\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Failed to create order.');\n      showTimedMessage(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || 'Failed to create order.', 5000, 'error');\n    } finally {\n      setLoading(false);\n    }\n  }, [clientName, clientAddress, selectedProducts, token, navigate, showTimedMessage, availableProducts]);\n  if (loadingAuthState) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center py-10 bg-white dark:bg-gray-800 rounded-lg shadow-md transition-colors duration-300\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-indigo-600 dark:text-indigo-300\",\n        children: \"Loading authentication state...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 13\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6 bg-white rounded-lg shadow-md dark:bg-gray-800 dark:shadow-none transition-colors duration-300\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => navigate('/orders'),\n        className: \"mr-3 p-2 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200\",\n        title: \"Back to Orders\",\n        children: /*#__PURE__*/_jsxDEV(ArrowLeft, {\n          className: \"w-5 h-5\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"text-3xl font-bold text-indigo-700 flex items-center dark:text-indigo-300\",\n        children: [/*#__PURE__*/_jsxDEV(PlusCircle, {\n          className: \"w-8 h-8 mr-3 text-purple-500 dark:text-purple-300\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 21\n        }, this), \"Create New Order\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 151,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 13\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg relative mb-4 dark:bg-red-900 dark:text-red-200\",\n      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n        className: \"font-bold\",\n        children: \"Error!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"block sm:inline\",\n        children: [\" \", error]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      className: \"space-y-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 md:grid-cols-2 gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"clientName\",\n            className: \"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1\",\n            children: \"Client Name\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"clientName\",\n            value: clientName,\n            onChange: e => setClientName(e.target.value),\n            placeholder: \"e.g., Client Name\",\n            required: true,\n            className: \"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200\\r bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"clientAddress\",\n            className: \"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1\",\n            children: \"Client Address\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"clientAddress\",\n            value: clientAddress,\n            onChange: e => setClientAddress(e.target.value),\n            placeholder: \"e.g., Pune, India\",\n            required: true,\n            className: \"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200\\r bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-4 border border-gray-300 rounded-lg dark:border-gray-700\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-3\",\n          children: \"Add Products to Order\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex flex-col sm:flex-row gap-3 mb-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"select\", {\n            className: \"flex-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\\r bg-white dark:bg-gray-700 text-gray-900 dark:text-white\",\n            onChange: e => handleAddProductToOrder(e.target.value),\n            value: \"\" // Reset select after adding\n            ,\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"-- Select a Product --\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 29\n            }, this), availableProducts.length > 0 ? availableProducts.map(product => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: product._id,\n              disabled: product.stock === 0,\n              children: [product.name, \" (\", product.sku, \") - Stock: \", product.stock, \" - $\", product.price.toFixed(2)]\n            }, product._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 37\n            }, this)) : /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              disabled: true,\n              children: \"No products available\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 213,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 199,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: () => {/* Logic is handled by select onChange */},\n            className: \"px-5 py-2 rounded-lg bg-blue-500 text-white font-semibold hover:bg-blue-600 transition-colors duration-200 shadow-md\",\n            disabled: availableProducts.length === 0,\n            children: \"Add Selected\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 216,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-3\",\n          children: selectedProducts.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-500 dark:text-gray-400\",\n            children: \"No products added to this order yet.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 29\n          }, this) : selectedProducts.map(item => {\n            const product = availableProducts.find(p => p._id === item.productId);\n            if (!product) return null; // Should not happen if data is consistent\n\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-medium text-gray-800 dark:text-gray-100\",\n                children: product.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 237,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center space-x-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  min: \"1\",\n                  max: product.stock,\n                  value: item.quantity,\n                  onChange: e => handleUpdateProductQuantity(item.productId, parseInt(e.target.value)),\n                  className: \"w-20 p-2 border border-gray-300 rounded-lg text-center dark:bg-gray-600 dark:text-white\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 239,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-700 dark:text-gray-300\",\n                  children: [\"x $\", product.price.toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 247,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-semibold text-gray-900 dark:text-white\",\n                  children: [\"= $\", (item.quantity * product.price).toFixed(2)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 248,\n                  columnNumber: 45\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  onClick: () => handleRemoveProductFromOrder(item.productId),\n                  className: \"p-2 text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-200 transition-colors\",\n                  children: /*#__PURE__*/_jsxDEV(Trash2, {\n                    className: \"w-5 h-5\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 256,\n                    columnNumber: 49\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 251,\n                  columnNumber: 45\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 238,\n                columnNumber: 41\n              }, this)]\n            }, item.productId, true, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 37\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-right text-xl font-bold text-gray-900 dark:text-white mt-4 pt-4 border-t border-gray-200 dark:border-gray-700\",\n          children: [\"Total: $\", calculateTotalPrice().toFixed(2)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 264,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: loading || selectedProducts.length === 0\n        // Adjusted width to w-auto and centered with mx-auto\n        ,\n        className: \"w-auto mx-auto flex items-center justify-center bg-indigo-600 text-white py-3 px-6 rounded-lg font-bold hover:bg-indigo-700 transition-all duration-300 shadow-md transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-indigo-400 disabled:opacity-50 disabled:cursor-not-allowed\",\n        children: [loading ? /*#__PURE__*/_jsxDEV(\"svg\", {\n          className: \"animate-spin h-5 w-5 mr-3 text-white\",\n          viewBox: \"0 0 24 24\",\n          children: [/*#__PURE__*/_jsxDEV(\"circle\", {\n            className: \"opacity-25\",\n            cx: \"12\",\n            cy: \"12\",\n            r: \"10\",\n            stroke: \"currentColor\",\n            strokeWidth: \"4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n            className: \"opacity-75\",\n            fill: \"currentColor\",\n            d: \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 278,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 25\n        }, this) : /*#__PURE__*/_jsxDEV(PlusCircle, {\n          className: \"w-5 h-5 mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 25\n        }, this), loading ? 'Creating Order...' : 'Create Order']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 142,\n    columnNumber: 9\n  }, this);\n}\n_s(AddOrderPage, \"nxMKlJsyPd6D8uHT79IXz6Y4xwo=\", false, function () {\n  return [useAuth, useNotification, useNavigate];\n});\n_c = AddOrderPage;\nexport default AddOrderPage;\nvar _c;\n$RefreshReg$(_c, \"AddOrderPage\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useNavigate","useAuth","useNotification","API","PlusCircle","ArrowLeft","Trash2","jsxDEV","_jsxDEV","AddOrderPage","_s","token","loadingAuthState","showTimedMessage","navigate","clientName","setClientName","clientAddress","setClientAddress","selectedProducts","setSelectedProducts","availableProducts","setAvailableProducts","loading","setLoading","error","setError","fetchAvailableProducts","response","get","headers","Authorization","data","err","console","handleAddProductToOrder","productId","productToAdd","find","p","_id","stock","existingProductIndex","findIndex","item","updatedSelectedProducts","quantity","name","prev","handleUpdateProductQuantity","newQuantity","map","productInStock","maxQuantity","Math","max","min","handleRemoveProductFromOrder","filter","calculateTotalPrice","reduce","total","product","price","handleSubmit","e","preventDefault","trim","length","orderData","products","post","_err$response","_err$response$data","_err$response2","_err$response2$data","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","title","onSubmit","htmlFor","type","id","value","onChange","target","placeholder","required","disabled","sku","toFixed","parseInt","viewBox","cx","cy","r","stroke","strokeWidth","fill","d","_c","$RefreshReg$"],"sources":["C:/Users/saksh/OneDrive/Documents/Internship-Mechtronix/Mechtronix-A-Project2/client/src/pages/AddOrder.jsx"],"sourcesContent":["// client/src/pages/AddOrder.jsx\r\n\r\nimport React, { useState, useEffect, useCallback } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useAuth } from '../auth/AuthContext.jsx';\r\nimport { useNotification } from '../components/Notification.jsx';\r\nimport API from '../api/axios.js';\r\nimport { PlusCircle, ArrowLeft, Trash2 } from 'lucide-react';\r\n\r\nfunction AddOrderPage() {\r\n    const { token, loadingAuthState } = useAuth();\r\n    const { showTimedMessage } = useNotification();\r\n    const navigate = useNavigate();\r\n\r\n    const [clientName, setClientName] = useState('');\r\n    const [clientAddress, setClientAddress] = useState('');\r\n    const [selectedProducts, setSelectedProducts] = useState([]); // Array of { productId, quantity }\r\n    const [availableProducts, setAvailableProducts] = useState([]); // All products fetched from API\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n\r\n    // Fetch all available products for selection\r\n    const fetchAvailableProducts = useCallback(async () => {\r\n        if (!token) return;\r\n        try {\r\n            const response = await API.get('/products', {\r\n                headers: {\r\n                    Authorization: `Bearer ${token}`\r\n                }\r\n            });\r\n            setAvailableProducts(response.data);\r\n        } catch (err) {\r\n            console.error('Error fetching available products:', err);\r\n            showTimedMessage('Failed to load products for order creation.', 5000, 'error');\r\n        }\r\n    }, [token, showTimedMessage]);\r\n\r\n    useEffect(() => {\r\n        if (!loadingAuthState) {\r\n            fetchAvailableProducts();\r\n        }\r\n    }, [loadingAuthState, fetchAvailableProducts]);\r\n\r\n    const handleAddProductToOrder = (productId) => {\r\n        const productToAdd = availableProducts.find(p => p._id === productId);\r\n        if (productToAdd && productToAdd.stock > 0) {\r\n            // Check if product already exists in selectedProducts\r\n            const existingProductIndex = selectedProducts.findIndex(item => item.productId === productId);\r\n\r\n            if (existingProductIndex > -1) {\r\n                // If exists, increment quantity if stock allows\r\n                const updatedSelectedProducts = [...selectedProducts];\r\n                if (updatedSelectedProducts[existingProductIndex].quantity < productToAdd.stock) {\r\n                    updatedSelectedProducts[existingProductIndex].quantity += 1;\r\n                    setSelectedProducts(updatedSelectedProducts);\r\n                } else {\r\n                    showTimedMessage(`Max stock reached for ${productToAdd.name}.`, 3000, 'warning');\r\n                }\r\n            } else {\r\n                // Add new product with quantity 1\r\n                setSelectedProducts(prev => [...prev, { productId: productToAdd._id, quantity: 1 }]);\r\n            }\r\n        } else if (productToAdd && productToAdd.stock === 0) {\r\n            showTimedMessage(`${productToAdd.name} is out of stock.`, 3000, 'error');\r\n        } else {\r\n            showTimedMessage('Product not found.', 3000, 'error');\r\n        }\r\n    };\r\n\r\n    const handleUpdateProductQuantity = (productId, newQuantity) => {\r\n        setSelectedProducts(prev =>\r\n            prev.map(item => {\r\n                if (item.productId === productId) {\r\n                    const productInStock = availableProducts.find(p => p._id === productId);\r\n                    const maxQuantity = productInStock ? productInStock.stock : 0;\r\n                    const quantity = Math.max(1, Math.min(newQuantity, maxQuantity)); // Ensure quantity is min 1 and not more than stock\r\n                    return { ...item, quantity };\r\n                }\r\n                return item;\r\n            })\r\n        );\r\n    };\r\n\r\n    const handleRemoveProductFromOrder = (productId) => {\r\n        setSelectedProducts(prev => prev.filter(item => item.productId !== productId));\r\n    };\r\n\r\n    const calculateTotalPrice = () => {\r\n        return selectedProducts.reduce((total, item) => {\r\n            const product = availableProducts.find(p => p._id === item.productId);\r\n            return total + (product ? product.price * item.quantity : 0);\r\n        }, 0);\r\n    };\r\n\r\n    const handleSubmit = useCallback(async (e) => {\r\n        e.preventDefault();\r\n        if (!token) {\r\n            showTimedMessage('You must be logged in to create an order.', 3000);\r\n            return;\r\n        }\r\n        if (!clientName.trim() || !clientAddress.trim() || selectedProducts.length === 0) {\r\n            showTimedMessage('Please fill all required fields and add at least one product.', 3000);\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            const orderData = {\r\n                clientName: clientName.trim(),\r\n                clientAddress: clientAddress.trim(),\r\n                products: selectedProducts, // This array will be processed by the backend\r\n            };\r\n            // Note: The backend route for placing orders is '/orders/place' based on previous discussions.\r\n            // If it's still '/orders', please adjust the backend routes accordingly.\r\n            await API.post('/orders/place', orderData, { // Changed to /orders/place\r\n                headers: {\r\n                    Authorization: `Bearer ${token}`\r\n                }\r\n            });\r\n            showTimedMessage('Order created successfully!', 3000, 'success');\r\n            navigate('/orders'); // Redirect to order list\r\n        } catch (err) {\r\n            console.error('Error creating order:', err);\r\n            setError(err.response?.data?.message || 'Failed to create order.');\r\n            showTimedMessage(err.response?.data?.message || 'Failed to create order.', 5000, 'error');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [clientName, clientAddress, selectedProducts, token, navigate, showTimedMessage, availableProducts]);\r\n\r\n    if (loadingAuthState) {\r\n        return (\r\n            <div className=\"flex items-center justify-center py-10 bg-white dark:bg-gray-800 rounded-lg shadow-md transition-colors duration-300\">\r\n                <p className=\"text-indigo-600 dark:text-indigo-300\">Loading authentication state...</p>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"p-6 bg-white rounded-lg shadow-md dark:bg-gray-800 dark:shadow-none transition-colors duration-300\">\r\n            <div className=\"flex items-center mb-6\">\r\n                <button\r\n                    onClick={() => navigate('/orders')}\r\n                    className=\"mr-3 p-2 rounded-full bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors duration-200\"\r\n                    title=\"Back to Orders\"\r\n                >\r\n                    <ArrowLeft className=\"w-5 h-5\" />\r\n                </button>\r\n                <h2 className=\"text-3xl font-bold text-indigo-700 flex items-center dark:text-indigo-300\">\r\n                    <PlusCircle className=\"w-8 h-8 mr-3 text-purple-500 dark:text-purple-300\" />\r\n                    Create New Order\r\n                </h2>\r\n            </div>\r\n\r\n            {error && (\r\n                <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg relative mb-4 dark:bg-red-900 dark:text-red-200\">\r\n                    <strong className=\"font-bold\">Error!</strong>\r\n                    <span className=\"block sm:inline\"> {error}</span>\r\n                </div>\r\n            )}\r\n\r\n            <form onSubmit={handleSubmit} className=\"space-y-6\">\r\n                {/* Client Details */}\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                    <div>\r\n                        <label htmlFor=\"clientName\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1\">Client Name</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            id=\"clientName\"\r\n                            value={clientName}\r\n                            onChange={(e) => setClientName(e.target.value)}\r\n                            placeholder=\"e.g., Client Name\"\r\n                            required\r\n                            className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200\r\n                                     bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400\"\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <label htmlFor=\"clientAddress\" className=\"block text-sm font-medium text-gray-700 dark:text-gray-200 mb-1\">Client Address</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            id=\"clientAddress\"\r\n                            value={clientAddress}\r\n                            onChange={(e) => setClientAddress(e.target.value)}\r\n                            placeholder=\"e.g., Pune, India\"\r\n                            required\r\n                            className=\"w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-all duration-200\r\n                                     bg-white dark:bg-gray-700 text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400\"\r\n                        />\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Product Selection */}\r\n                <div className=\"p-4 border border-gray-300 rounded-lg dark:border-gray-700\">\r\n                    <h3 className=\"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-3\">Add Products to Order</h3>\r\n                    <div className=\"flex flex-col sm:flex-row gap-3 mb-4\">\r\n                        <select\r\n                            className=\"flex-1 p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\r\n                                     bg-white dark:bg-gray-700 text-gray-900 dark:text-white\"\r\n                            onChange={(e) => handleAddProductToOrder(e.target.value)}\r\n                            value=\"\" // Reset select after adding\r\n                        >\r\n                            <option value=\"\">-- Select a Product --</option>\r\n                            {availableProducts.length > 0 ? (\r\n                                availableProducts.map(product => (\r\n                                    <option key={product._id} value={product._id} disabled={product.stock === 0}>\r\n                                        {product.name} ({product.sku}) - Stock: {product.stock} - ${product.price.toFixed(2)}\r\n                                    </option>\r\n                                ))\r\n                            ) : (\r\n                                <option value=\"\" disabled>No products available</option>\r\n                            )}\r\n                        </select>\r\n                        <button\r\n                            type=\"button\"\r\n                            onClick={() => { /* Logic is handled by select onChange */ }}\r\n                            className=\"px-5 py-2 rounded-lg bg-blue-500 text-white font-semibold hover:bg-blue-600 transition-colors duration-200 shadow-md\"\r\n                            disabled={availableProducts.length === 0}\r\n                        >\r\n                            Add Selected\r\n                        </button>\r\n                    </div>\r\n\r\n                    {/* Selected Products List */}\r\n                    <div className=\"space-y-3\">\r\n                        {selectedProducts.length === 0 ? (\r\n                            <p className=\"text-gray-500 dark:text-gray-400\">No products added to this order yet.</p>\r\n                        ) : (\r\n                            selectedProducts.map(item => {\r\n                                const product = availableProducts.find(p => p._id === item.productId);\r\n                                if (!product) return null; // Should not happen if data is consistent\r\n\r\n                                return (\r\n                                    <div key={item.productId} className=\"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-700 rounded-lg border border-gray-200 dark:border-gray-600\">\r\n                                        <span className=\"font-medium text-gray-800 dark:text-gray-100\">{product.name}</span>\r\n                                        <div className=\"flex items-center space-x-2\">\r\n                                            <input\r\n                                                type=\"number\"\r\n                                                min=\"1\"\r\n                                                max={product.stock}\r\n                                                value={item.quantity}\r\n                                                onChange={(e) => handleUpdateProductQuantity(item.productId, parseInt(e.target.value))}\r\n                                                className=\"w-20 p-2 border border-gray-300 rounded-lg text-center dark:bg-gray-600 dark:text-white\"\r\n                                            />\r\n                                            <span className=\"text-gray-700 dark:text-gray-300\">x ${product.price.toFixed(2)}</span>\r\n                                            <span className=\"font-semibold text-gray-900 dark:text-white\">\r\n                                                = ${(item.quantity * product.price).toFixed(2)}\r\n                                            </span>\r\n                                            <button\r\n                                                type=\"button\"\r\n                                                onClick={() => handleRemoveProductFromOrder(item.productId)}\r\n                                                className=\"p-2 text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-200 transition-colors\"\r\n                                            >\r\n                                                <Trash2 className=\"w-5 h-5\" />\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n                                );\r\n                            })\r\n                        )}\r\n                    </div>\r\n                    <div className=\"text-right text-xl font-bold text-gray-900 dark:text-white mt-4 pt-4 border-t border-gray-200 dark:border-gray-700\">\r\n                        Total: ${calculateTotalPrice().toFixed(2)}\r\n                    </div>\r\n                </div>\r\n\r\n                <button\r\n                    type=\"submit\"\r\n                    disabled={loading || selectedProducts.length === 0}\r\n                    // Adjusted width to w-auto and centered with mx-auto\r\n                    className=\"w-auto mx-auto flex items-center justify-center bg-indigo-600 text-white py-3 px-6 rounded-lg font-bold hover:bg-indigo-700 transition-all duration-300 shadow-md transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-indigo-400 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                >\r\n                    {loading ? (\r\n                        <svg className=\"animate-spin h-5 w-5 mr-3 text-white\" viewBox=\"0 0 24 24\">\r\n                            <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\r\n                            <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\r\n                        </svg>\r\n                    ) : (\r\n                        <PlusCircle className=\"w-5 h-5 mr-2\" />\r\n                    )}\r\n                    {loading ? 'Creating Order...' : 'Create Order'}\r\n                </button>\r\n            </form>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default AddOrderPage;\r\n"],"mappings":";;AAAA;;AAEA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,WAAW,QAAQ,OAAO;AAC/D,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,SAASC,OAAO,QAAQ,yBAAyB;AACjD,SAASC,eAAe,QAAQ,gCAAgC;AAChE,OAAOC,GAAG,MAAM,iBAAiB;AACjC,SAASC,UAAU,EAAEC,SAAS,EAAEC,MAAM,QAAQ,cAAc;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE7D,SAASC,YAAYA,CAAA,EAAG;EAAAC,EAAA;EACpB,MAAM;IAAEC,KAAK;IAAEC;EAAiB,CAAC,GAAGX,OAAO,CAAC,CAAC;EAC7C,MAAM;IAAEY;EAAiB,CAAC,GAAGX,eAAe,CAAC,CAAC;EAC9C,MAAMY,QAAQ,GAAGd,WAAW,CAAC,CAAC;EAE9B,MAAM,CAACe,UAAU,EAAEC,aAAa,CAAC,GAAGnB,QAAQ,CAAC,EAAE,CAAC;EAChD,MAAM,CAACoB,aAAa,EAAEC,gBAAgB,CAAC,GAAGrB,QAAQ,CAAC,EAAE,CAAC;EACtD,MAAM,CAACsB,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGvB,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;EAC9D,MAAM,CAACwB,iBAAiB,EAAEC,oBAAoB,CAAC,GAAGzB,QAAQ,CAAC,EAAE,CAAC,CAAC,CAAC;EAChE,MAAM,CAAC0B,OAAO,EAAEC,UAAU,CAAC,GAAG3B,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAAC4B,KAAK,EAAEC,QAAQ,CAAC,GAAG7B,QAAQ,CAAC,IAAI,CAAC;;EAExC;EACA,MAAM8B,sBAAsB,GAAG5B,WAAW,CAAC,YAAY;IACnD,IAAI,CAACY,KAAK,EAAE;IACZ,IAAI;MACA,MAAMiB,QAAQ,GAAG,MAAMzB,GAAG,CAAC0B,GAAG,CAAC,WAAW,EAAE;QACxCC,OAAO,EAAE;UACLC,aAAa,EAAE,UAAUpB,KAAK;QAClC;MACJ,CAAC,CAAC;MACFW,oBAAoB,CAACM,QAAQ,CAACI,IAAI,CAAC;IACvC,CAAC,CAAC,OAAOC,GAAG,EAAE;MACVC,OAAO,CAACT,KAAK,CAAC,oCAAoC,EAAEQ,GAAG,CAAC;MACxDpB,gBAAgB,CAAC,6CAA6C,EAAE,IAAI,EAAE,OAAO,CAAC;IAClF;EACJ,CAAC,EAAE,CAACF,KAAK,EAAEE,gBAAgB,CAAC,CAAC;EAE7Bf,SAAS,CAAC,MAAM;IACZ,IAAI,CAACc,gBAAgB,EAAE;MACnBe,sBAAsB,CAAC,CAAC;IAC5B;EACJ,CAAC,EAAE,CAACf,gBAAgB,EAAEe,sBAAsB,CAAC,CAAC;EAE9C,MAAMQ,uBAAuB,GAAIC,SAAS,IAAK;IAC3C,MAAMC,YAAY,GAAGhB,iBAAiB,CAACiB,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,GAAG,KAAKJ,SAAS,CAAC;IACrE,IAAIC,YAAY,IAAIA,YAAY,CAACI,KAAK,GAAG,CAAC,EAAE;MACxC;MACA,MAAMC,oBAAoB,GAAGvB,gBAAgB,CAACwB,SAAS,CAACC,IAAI,IAAIA,IAAI,CAACR,SAAS,KAAKA,SAAS,CAAC;MAE7F,IAAIM,oBAAoB,GAAG,CAAC,CAAC,EAAE;QAC3B;QACA,MAAMG,uBAAuB,GAAG,CAAC,GAAG1B,gBAAgB,CAAC;QACrD,IAAI0B,uBAAuB,CAACH,oBAAoB,CAAC,CAACI,QAAQ,GAAGT,YAAY,CAACI,KAAK,EAAE;UAC7EI,uBAAuB,CAACH,oBAAoB,CAAC,CAACI,QAAQ,IAAI,CAAC;UAC3D1B,mBAAmB,CAACyB,uBAAuB,CAAC;QAChD,CAAC,MAAM;UACHhC,gBAAgB,CAAC,yBAAyBwB,YAAY,CAACU,IAAI,GAAG,EAAE,IAAI,EAAE,SAAS,CAAC;QACpF;MACJ,CAAC,MAAM;QACH;QACA3B,mBAAmB,CAAC4B,IAAI,IAAI,CAAC,GAAGA,IAAI,EAAE;UAAEZ,SAAS,EAAEC,YAAY,CAACG,GAAG;UAAEM,QAAQ,EAAE;QAAE,CAAC,CAAC,CAAC;MACxF;IACJ,CAAC,MAAM,IAAIT,YAAY,IAAIA,YAAY,CAACI,KAAK,KAAK,CAAC,EAAE;MACjD5B,gBAAgB,CAAC,GAAGwB,YAAY,CAACU,IAAI,mBAAmB,EAAE,IAAI,EAAE,OAAO,CAAC;IAC5E,CAAC,MAAM;MACHlC,gBAAgB,CAAC,oBAAoB,EAAE,IAAI,EAAE,OAAO,CAAC;IACzD;EACJ,CAAC;EAED,MAAMoC,2BAA2B,GAAGA,CAACb,SAAS,EAAEc,WAAW,KAAK;IAC5D9B,mBAAmB,CAAC4B,IAAI,IACpBA,IAAI,CAACG,GAAG,CAACP,IAAI,IAAI;MACb,IAAIA,IAAI,CAACR,SAAS,KAAKA,SAAS,EAAE;QAC9B,MAAMgB,cAAc,GAAG/B,iBAAiB,CAACiB,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,GAAG,KAAKJ,SAAS,CAAC;QACvE,MAAMiB,WAAW,GAAGD,cAAc,GAAGA,cAAc,CAACX,KAAK,GAAG,CAAC;QAC7D,MAAMK,QAAQ,GAAGQ,IAAI,CAACC,GAAG,CAAC,CAAC,EAAED,IAAI,CAACE,GAAG,CAACN,WAAW,EAAEG,WAAW,CAAC,CAAC,CAAC,CAAC;QAClE,OAAO;UAAE,GAAGT,IAAI;UAAEE;QAAS,CAAC;MAChC;MACA,OAAOF,IAAI;IACf,CAAC,CACL,CAAC;EACL,CAAC;EAED,MAAMa,4BAA4B,GAAIrB,SAAS,IAAK;IAChDhB,mBAAmB,CAAC4B,IAAI,IAAIA,IAAI,CAACU,MAAM,CAACd,IAAI,IAAIA,IAAI,CAACR,SAAS,KAAKA,SAAS,CAAC,CAAC;EAClF,CAAC;EAED,MAAMuB,mBAAmB,GAAGA,CAAA,KAAM;IAC9B,OAAOxC,gBAAgB,CAACyC,MAAM,CAAC,CAACC,KAAK,EAAEjB,IAAI,KAAK;MAC5C,MAAMkB,OAAO,GAAGzC,iBAAiB,CAACiB,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,GAAG,KAAKI,IAAI,CAACR,SAAS,CAAC;MACrE,OAAOyB,KAAK,IAAIC,OAAO,GAAGA,OAAO,CAACC,KAAK,GAAGnB,IAAI,CAACE,QAAQ,GAAG,CAAC,CAAC;IAChE,CAAC,EAAE,CAAC,CAAC;EACT,CAAC;EAED,MAAMkB,YAAY,GAAGjE,WAAW,CAAC,MAAOkE,CAAC,IAAK;IAC1CA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClB,IAAI,CAACvD,KAAK,EAAE;MACRE,gBAAgB,CAAC,2CAA2C,EAAE,IAAI,CAAC;MACnE;IACJ;IACA,IAAI,CAACE,UAAU,CAACoD,IAAI,CAAC,CAAC,IAAI,CAAClD,aAAa,CAACkD,IAAI,CAAC,CAAC,IAAIhD,gBAAgB,CAACiD,MAAM,KAAK,CAAC,EAAE;MAC9EvD,gBAAgB,CAAC,+DAA+D,EAAE,IAAI,CAAC;MACvF;IACJ;IAEAW,UAAU,CAAC,IAAI,CAAC;IAChBE,QAAQ,CAAC,IAAI,CAAC;IAEd,IAAI;MACA,MAAM2C,SAAS,GAAG;QACdtD,UAAU,EAAEA,UAAU,CAACoD,IAAI,CAAC,CAAC;QAC7BlD,aAAa,EAAEA,aAAa,CAACkD,IAAI,CAAC,CAAC;QACnCG,QAAQ,EAAEnD,gBAAgB,CAAE;MAChC,CAAC;MACD;MACA;MACA,MAAMhB,GAAG,CAACoE,IAAI,CAAC,eAAe,EAAEF,SAAS,EAAE;QAAE;QACzCvC,OAAO,EAAE;UACLC,aAAa,EAAE,UAAUpB,KAAK;QAClC;MACJ,CAAC,CAAC;MACFE,gBAAgB,CAAC,6BAA6B,EAAE,IAAI,EAAE,SAAS,CAAC;MAChEC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC;IACzB,CAAC,CAAC,OAAOmB,GAAG,EAAE;MAAA,IAAAuC,aAAA,EAAAC,kBAAA,EAAAC,cAAA,EAAAC,mBAAA;MACVzC,OAAO,CAACT,KAAK,CAAC,uBAAuB,EAAEQ,GAAG,CAAC;MAC3CP,QAAQ,CAAC,EAAA8C,aAAA,GAAAvC,GAAG,CAACL,QAAQ,cAAA4C,aAAA,wBAAAC,kBAAA,GAAZD,aAAA,CAAcxC,IAAI,cAAAyC,kBAAA,uBAAlBA,kBAAA,CAAoBG,OAAO,KAAI,yBAAyB,CAAC;MAClE/D,gBAAgB,CAAC,EAAA6D,cAAA,GAAAzC,GAAG,CAACL,QAAQ,cAAA8C,cAAA,wBAAAC,mBAAA,GAAZD,cAAA,CAAc1C,IAAI,cAAA2C,mBAAA,uBAAlBA,mBAAA,CAAoBC,OAAO,KAAI,yBAAyB,EAAE,IAAI,EAAE,OAAO,CAAC;IAC7F,CAAC,SAAS;MACNpD,UAAU,CAAC,KAAK,CAAC;IACrB;EACJ,CAAC,EAAE,CAACT,UAAU,EAAEE,aAAa,EAAEE,gBAAgB,EAAER,KAAK,EAAEG,QAAQ,EAAED,gBAAgB,EAAEQ,iBAAiB,CAAC,CAAC;EAEvG,IAAIT,gBAAgB,EAAE;IAClB,oBACIJ,OAAA;MAAKqE,SAAS,EAAC,sHAAsH;MAAAC,QAAA,eACjItE,OAAA;QAAGqE,SAAS,EAAC,sCAAsC;QAAAC,QAAA,EAAC;MAA+B;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAG;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACtF,CAAC;EAEd;EAEA,oBACI1E,OAAA;IAAKqE,SAAS,EAAC,oGAAoG;IAAAC,QAAA,gBAC/GtE,OAAA;MAAKqE,SAAS,EAAC,wBAAwB;MAAAC,QAAA,gBACnCtE,OAAA;QACI2E,OAAO,EAAEA,CAAA,KAAMrE,QAAQ,CAAC,SAAS,CAAE;QACnC+D,SAAS,EAAC,6JAA6J;QACvKO,KAAK,EAAC,gBAAgB;QAAAN,QAAA,eAEtBtE,OAAA,CAACH,SAAS;UAACwE,SAAS,EAAC;QAAS;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC7B,CAAC,eACT1E,OAAA;QAAIqE,SAAS,EAAC,2EAA2E;QAAAC,QAAA,gBACrFtE,OAAA,CAACJ,UAAU;UAACyE,SAAS,EAAC;QAAmD;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CAAC,oBAEhF;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACJ,CAAC,EAELzD,KAAK,iBACFjB,OAAA;MAAKqE,SAAS,EAAC,oHAAoH;MAAAC,QAAA,gBAC/HtE,OAAA;QAAQqE,SAAS,EAAC,WAAW;QAAAC,QAAA,EAAC;MAAM;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAQ,CAAC,eAC7C1E,OAAA;QAAMqE,SAAS,EAAC,iBAAiB;QAAAC,QAAA,GAAC,GAAC,EAACrD,KAAK;MAAA;QAAAsD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAO,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAChD,CACR,eAED1E,OAAA;MAAM6E,QAAQ,EAAErB,YAAa;MAACa,SAAS,EAAC,WAAW;MAAAC,QAAA,gBAE/CtE,OAAA;QAAKqE,SAAS,EAAC,uCAAuC;QAAAC,QAAA,gBAClDtE,OAAA;UAAAsE,QAAA,gBACItE,OAAA;YAAO8E,OAAO,EAAC,YAAY;YAACT,SAAS,EAAC,iEAAiE;YAAAC,QAAA,EAAC;UAAW;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eAC3H1E,OAAA;YACI+E,IAAI,EAAC,MAAM;YACXC,EAAE,EAAC,YAAY;YACfC,KAAK,EAAE1E,UAAW;YAClB2E,QAAQ,EAAGzB,CAAC,IAAKjD,aAAa,CAACiD,CAAC,CAAC0B,MAAM,CAACF,KAAK,CAAE;YAC/CG,WAAW,EAAC,mBAAmB;YAC/BC,QAAQ;YACRhB,SAAS,EAAC;UACsG;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACnH,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACD,CAAC,eACN1E,OAAA;UAAAsE,QAAA,gBACItE,OAAA;YAAO8E,OAAO,EAAC,eAAe;YAACT,SAAS,EAAC,iEAAiE;YAAAC,QAAA,EAAC;UAAc;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eACjI1E,OAAA;YACI+E,IAAI,EAAC,MAAM;YACXC,EAAE,EAAC,eAAe;YAClBC,KAAK,EAAExE,aAAc;YACrByE,QAAQ,EAAGzB,CAAC,IAAK/C,gBAAgB,CAAC+C,CAAC,CAAC0B,MAAM,CAACF,KAAK,CAAE;YAClDG,WAAW,EAAC,mBAAmB;YAC/BC,QAAQ;YACRhB,SAAS,EAAC;UACsG;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACnH,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACD,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CAAC,eAGN1E,OAAA;QAAKqE,SAAS,EAAC,4DAA4D;QAAAC,QAAA,gBACvEtE,OAAA;UAAIqE,SAAS,EAAC,6DAA6D;UAAAC,QAAA,EAAC;QAAqB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eACtG1E,OAAA;UAAKqE,SAAS,EAAC,sCAAsC;UAAAC,QAAA,gBACjDtE,OAAA;YACIqE,SAAS,EAAC,4JACuD;YACjEa,QAAQ,EAAGzB,CAAC,IAAK9B,uBAAuB,CAAC8B,CAAC,CAAC0B,MAAM,CAACF,KAAK,CAAE;YACzDA,KAAK,EAAC,EAAE,CAAC;YAAA;YAAAX,QAAA,gBAETtE,OAAA;cAAQiF,KAAK,EAAC,EAAE;cAAAX,QAAA,EAAC;YAAsB;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,EAC/C7D,iBAAiB,CAAC+C,MAAM,GAAG,CAAC,GACzB/C,iBAAiB,CAAC8B,GAAG,CAACW,OAAO,iBACzBtD,OAAA;cAA0BiF,KAAK,EAAE3B,OAAO,CAACtB,GAAI;cAACsD,QAAQ,EAAEhC,OAAO,CAACrB,KAAK,KAAK,CAAE;cAAAqC,QAAA,GACvEhB,OAAO,CAACf,IAAI,EAAC,IAAE,EAACe,OAAO,CAACiC,GAAG,EAAC,aAAW,EAACjC,OAAO,CAACrB,KAAK,EAAC,MAAI,EAACqB,OAAO,CAACC,KAAK,CAACiC,OAAO,CAAC,CAAC,CAAC;YAAA,GAD3ElC,OAAO,CAACtB,GAAG;cAAAuC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAEhB,CACX,CAAC,gBAEF1E,OAAA;cAAQiF,KAAK,EAAC,EAAE;cAACK,QAAQ;cAAAhB,QAAA,EAAC;YAAqB;cAAAC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAC1D;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACG,CAAC,eACT1E,OAAA;YACI+E,IAAI,EAAC,QAAQ;YACbJ,OAAO,EAAEA,CAAA,KAAM,CAAE,0CAA4C;YAC7DN,SAAS,EAAC,sHAAsH;YAChIiB,QAAQ,EAAEzE,iBAAiB,CAAC+C,MAAM,KAAK,CAAE;YAAAU,QAAA,EAC5C;UAED;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACR,CAAC,eAGN1E,OAAA;UAAKqE,SAAS,EAAC,WAAW;UAAAC,QAAA,EACrB3D,gBAAgB,CAACiD,MAAM,KAAK,CAAC,gBAC1B5D,OAAA;YAAGqE,SAAS,EAAC,kCAAkC;YAAAC,QAAA,EAAC;UAAoC;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC,GAExF/D,gBAAgB,CAACgC,GAAG,CAACP,IAAI,IAAI;YACzB,MAAMkB,OAAO,GAAGzC,iBAAiB,CAACiB,IAAI,CAACC,CAAC,IAAIA,CAAC,CAACC,GAAG,KAAKI,IAAI,CAACR,SAAS,CAAC;YACrE,IAAI,CAAC0B,OAAO,EAAE,OAAO,IAAI,CAAC,CAAC;;YAE3B,oBACItD,OAAA;cAA0BqE,SAAS,EAAC,0HAA0H;cAAAC,QAAA,gBAC1JtE,OAAA;gBAAMqE,SAAS,EAAC,8CAA8C;gBAAAC,QAAA,EAAEhB,OAAO,CAACf;cAAI;gBAAAgC,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAO,CAAC,eACpF1E,OAAA;gBAAKqE,SAAS,EAAC,6BAA6B;gBAAAC,QAAA,gBACxCtE,OAAA;kBACI+E,IAAI,EAAC,QAAQ;kBACb/B,GAAG,EAAC,GAAG;kBACPD,GAAG,EAAEO,OAAO,CAACrB,KAAM;kBACnBgD,KAAK,EAAE7C,IAAI,CAACE,QAAS;kBACrB4C,QAAQ,EAAGzB,CAAC,IAAKhB,2BAA2B,CAACL,IAAI,CAACR,SAAS,EAAE6D,QAAQ,CAAChC,CAAC,CAAC0B,MAAM,CAACF,KAAK,CAAC,CAAE;kBACvFZ,SAAS,EAAC;gBAAyF;kBAAAE,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OACtG,CAAC,eACF1E,OAAA;kBAAMqE,SAAS,EAAC,kCAAkC;kBAAAC,QAAA,GAAC,KAAG,EAAChB,OAAO,CAACC,KAAK,CAACiC,OAAO,CAAC,CAAC,CAAC;gBAAA;kBAAAjB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAAO,CAAC,eACvF1E,OAAA;kBAAMqE,SAAS,EAAC,6CAA6C;kBAAAC,QAAA,GAAC,KACvD,EAAC,CAAClC,IAAI,CAACE,QAAQ,GAAGgB,OAAO,CAACC,KAAK,EAAEiC,OAAO,CAAC,CAAC,CAAC;gBAAA;kBAAAjB,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC5C,CAAC,eACP1E,OAAA;kBACI+E,IAAI,EAAC,QAAQ;kBACbJ,OAAO,EAAEA,CAAA,KAAM1B,4BAA4B,CAACb,IAAI,CAACR,SAAS,CAAE;kBAC5DyC,SAAS,EAAC,iGAAiG;kBAAAC,QAAA,eAE3GtE,OAAA,CAACF,MAAM;oBAACuE,SAAS,EAAC;kBAAS;oBAAAE,QAAA,EAAAC,YAAA;oBAAAC,UAAA;oBAAAC,YAAA;kBAAA,OAAE;gBAAC;kBAAAH,QAAA,EAAAC,YAAA;kBAAAC,UAAA;kBAAAC,YAAA;gBAAA,OAC1B,CAAC;cAAA;gBAAAH,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACR,CAAC;YAAA,GAtBAtC,IAAI,CAACR,SAAS;cAAA2C,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAuBnB,CAAC;UAEd,CAAC;QACJ;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACA,CAAC,eACN1E,OAAA;UAAKqE,SAAS,EAAC,oHAAoH;UAAAC,QAAA,GAAC,UACxH,EAACnB,mBAAmB,CAAC,CAAC,CAACqC,OAAO,CAAC,CAAC,CAAC;QAAA;UAAAjB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACxC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CAAC,eAEN1E,OAAA;QACI+E,IAAI,EAAC,QAAQ;QACbO,QAAQ,EAAEvE,OAAO,IAAIJ,gBAAgB,CAACiD,MAAM,KAAK;QACjD;QAAA;QACAS,SAAS,EAAC,mSAAmS;QAAAC,QAAA,GAE5SvD,OAAO,gBACJf,OAAA;UAAKqE,SAAS,EAAC,sCAAsC;UAACqB,OAAO,EAAC,WAAW;UAAApB,QAAA,gBACrEtE,OAAA;YAAQqE,SAAS,EAAC,YAAY;YAACsB,EAAE,EAAC,IAAI;YAACC,EAAE,EAAC,IAAI;YAACC,CAAC,EAAC,IAAI;YAACC,MAAM,EAAC,cAAc;YAACC,WAAW,EAAC;UAAG;YAAAxB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAS,CAAC,eACrG1E,OAAA;YAAMqE,SAAS,EAAC,YAAY;YAAC2B,IAAI,EAAC,cAAc;YAACC,CAAC,EAAC;UAAiH;YAAA1B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC3K,CAAC,gBAEN1E,OAAA,CAACJ,UAAU;UAACyE,SAAS,EAAC;QAAc;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE,CACzC,EACA3D,OAAO,GAAG,mBAAmB,GAAG,cAAc;MAAA;QAAAwD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAC3C,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACP,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACN,CAAC;AAEd;AAACxE,EAAA,CAtRQD,YAAY;EAAA,QACmBR,OAAO,EACdC,eAAe,EAC3BF,WAAW;AAAA;AAAA0G,EAAA,GAHvBjG,YAAY;AAwRrB,eAAeA,YAAY;AAAC,IAAAiG,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}